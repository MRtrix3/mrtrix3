Perform DWI bias field correction using the "mtnormalise" command
This algorithm bases its operation almost entirely on the utilisation of multi-tissue decomposition information to estimate an underlying B1 receive field, as is implemented in the MRtrix3 command "mtnormalise". Its typical usage is however slightly different, in that the primary output of the command is not the bias-field-corrected FODs, but a bias-field-corrected version of the DWI series.
The operation of this script is a subset of that performed by the script "dwibiasnormmask". Many users may find that comprehensive solution preferable; this dwibiascorrect algorithm is nevertheless provided to demonstrate specifically the bias field correction portion of that command.
The ODFs estimated within this optimisation procedure are by default of lower maximal spherical harmonic degree than what would be advised for analysis. This is done for computational efficiency. This behaviour can be modified through the -lmax command-line option.
ARGUMENT input 0 0 IMAGEIN
The input image series to be corrected
ARGUMENT output 0 0 IMAGEOUT
The output corrected image series
OPTION -lmax 1 0
The maximum spherical harmonic degree for the estimated FODs (see Description); defaults are "4,0,0" for multi-shell and "4,0" for single-shell data)
ARGUMENT values 0 0 ISEQ
OPTION -grad 1 0
Provide the diffusion gradient table in MRtrix format
ARGUMENT file 0 0 FILEIN
OPTION -fslgrad 1 0
Provide the diffusion gradient table in FSL bvecs/bvals format
ARGUMENT bvecs 0 0 FILEIN
ARGUMENT bvals 0 0 FILEIN
OPTION -mask 1 0
Manually provide an input mask image for bias field estimation
ARGUMENT image 0 0 IMAGEIN
OPTION -bias 1 0
Output an image containing the estimated bias field
ARGUMENT image 0 0 IMAGEOUT
OPTION -nocleanup 1 0
do not delete intermediate files during script execution, and do not delete scratch directory at script completion.
OPTION -scratch 1 0
manually specify the path in which to generate the scratch directory.
ARGUMENT /path/to/scratch/ 0 0 DIROUT
OPTION -continue 1 0
continue the script from a previous execution; must provide the scratch directory path, and the name of the last successfully-generated file.
ARGUMENT ScratchDir 0 0 VARIOUS
ARGUMENT LastFile 0 0 VARIOUS
OPTION -info 1 0
display information messages.
OPTION -quiet 1 0
do not display information messages or progress status. Alternatively, this can be achieved by setting the MRTRIX_QUIET environment variable to a non-empty string.
OPTION -debug 1 0
display debugging messages.
OPTION -force 1 0
force overwrite of output files.
OPTION -nthreads 1 0
use this number of threads in multi-threaded applications (set to 0 to disable multi-threading).
ARGUMENT number 0 0 INT 0 9223372036854775807
OPTION -config 1 0
temporarily set the value of an MRtrix config file entry.
ARGUMENT key 0 0 TEXT
ARGUMENT value 0 0 TEXT
OPTION -help 1 0
display this information page and exit.
OPTION -version 1 0
display version information and exit.
