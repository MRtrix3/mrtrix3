# Contributing to *MRtrix3*

Those outside of the code *MRtrix3* development team can still contribute
to the ongoing improvement of *MRtrix3* in a number of ways:

## Asking questions

General questions regarding *MRtrix3* installation, usage, or any other
aspect that is not specific to the *MRtrix3* *code*, should be directed to
the [community forum](http://community.mrtrix.org/). Also consider perusing
the [online documentation](https://mrtrix.readthedocs.io/en/latest/) for
the software, in case your issue has already been described there.

## Bug reporting

1. Please search on both the [*MRtrix3* community forum](http://community.mrtrix.org/search)
   and the [GitHub issue list](https://github.com/MRtrix3/mrtrix3/issues)
   to see if anybody else has lodged a similar observation.

1. How confident are you that the behaviour you have observed is in fact a
   genuine bug, and not a misunderstanding?

   -  *Confident*: Please [open a new GitHub issue](https://github.com/MRtrix3/mrtrix3/issues/new);
      select the "bug report" issue template to get started.

   -  *Not so confident*: That's fine! Consider instead creating a new topic
      on the [*MRtrix3* community forum](http://community.mrtrix.org/);
      others can then comment on your observation and determine the
      appropriate level of escalation.

## Requesting a new feature

Please search the [GitHub issue list](https://github.com/MRtrix3/mrtrix3/issues)
to see if anybody else has made a comparable request:

   -  If a corresponding issue already exists, please add a comment to that
      issue in order to escalate the request. Additionally describe any
      aspect of that feature not yet described in the existing issue.

   -  If no such listing exists, then you are welcome to create a [new
      issue](https://github.com/MRtrix3/mrtrix3/issues/new) outlining the
      request. Be sure to select the "feature request" option to get started
      with writing the Issue.

## Making direct contributions

Thanks for your interest in making direct contributions to *MRtrix3*!
We are excited to expand the breadth of researchers involved in improving
and expanding this software, and to snsure that all who make such
contributions receive appropriate acknowledgment through Git.

The instructions below give an overview of how to go about generating a
proposed change to *MRtrix3*. The *MRtrix3* developers are however more
than willing to be engaged in the process for those without experience
in Git or GitHub.

1. You will need to create a *fork* of the [*MRtrix3* repository](https://github.com/MRtrix3/mrtrix3)
   into your GitHub account, where unlike the main *MRtrix3* repository,
   you will have full write access to make the requisite changes.

1. Modifications should be made in a Git branch that is named appropriately
   according to the modifications that are being made. The existing code
   branch on which this new derived branch should be based depends on the
   nature of the proposed change (described later below).

1. Identify the appropriate classification of the change that you propose
   to make:

   -  If the current code behaviour is *egregiously incorrect*, then
      read the "[fixing a bug](#fixing-a-bug)" section.

   -  If:

      -  The current code behaviour is considered incorrect or non-ideal,
         but is nevertheless *functional*;

      -  The proposed change would *alter* the output data generated by
         a command;

      -  The proposed change improves the *perfomance* of a particular
         command or process, but does not change its output;

      , then read the "[adding or altering features](#adding-or-altering-feature)"
      section.

   -  If you wish to make changes to the [*MRtrix3 documentation*](https://mrtrix.readthedocs.io/en/latest/),
      read the "[documentation](#documentation)" section.

1. For code contributions, if possible, a unit test or reproducibility
   test should be added. This not only demonstrates the behaviour of the
   proposed code, but will also preclude future regression of the behaviour
   of that code. For tests that require the addition of raw data to the
   [`test_data` repository](https://github.com/MRtrix3/test_data), please
   coordinate with one of the *MRtrix3* developers.

1. Once completed, a Pull Request should be generated that merges the
   corresponding branch in your forked version of the *MRtrix3* repository
   into the appropriate target branch of the main *MRtrix3* repository
   itself.

If multiple persons have contributed to the proposed changes, it is
possible to modify individual Git commits to have ["multiple authors"](https://help.github.com/en/articles/creating-a-commit-with-multiple-authors),
to ensure that all contributors receive appropriate acknowledgment.

### Fixing a bug

1. If there does not already exist a [GitHub Issue](https://github.com/MRtrix3/mrtrix3/issues)
   describing the bug, consider reporting the bug as a standalone Issue
   prior to progressing further; that way developers can confirm the issue,
   and possibly provide guidance if you intend to resolve the issue yourself.
   Later, the Pull Request incorporating the necessary changes should then
   reference the listed Issue (simply add in the description section the
   "`#`" character followed by the issue number).

1. Bug fixes are merged directly to `master`; as such, modifications to the
   code should be made in a branch that is derived from `master`, and the
   corresponding Pull Request should select `master` as the target branch
   for code merging.

1. A unit test or reproducibility test should ideally be added that
   would fail when executed using the current `master` code, but passes
   with the proposed changes.

### Adding or altering features

1. New features, as well as any code changes that alter the output data
   produced by a command, are merged to the `dev` branch, which contains
   all resolved changes since the most recent tag update. As such, any
   proposed changes that fall under this classification should be made
   in a branch that is based off of the `dev` branch, and the corresponding
   Pull Request should select `dev` as the target branch for code merging.

### Documentation

For proposed documentation changes, please communicate with the *MRtrix3*
developers by creating a [new GitHub issue](https://github.com/MRtrix3/mrtrix3/issues/new).
The appropriate course of action will depend on the component of the
documentation intended to be changed as well as the nature of the change.
In addition, the location of much of the *MRtrix3* documentation will be
changing imminently (#1622), and so any proposed documetation content
changes would need to be coordinated with such.
