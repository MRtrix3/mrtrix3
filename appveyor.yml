version: 1.0.{build}

image: Visual Studio 2017

platform: x64

configuration: Release

clone_folder: c:\msys64\mrtrix3

shallow_clone: true
clone_depth: 5

matrix:
  fast_finish: false

environment:
  test: run
  matrix:
    - py: python2
    - py: python3

init:
  - git config --global core.autocrlf input

build: off

build_script:
  - cmd: C:\msys64\usr\bin\bash -e -l -c "pacman -S --noconfirm mingw-w64-x86_64-eigen3 mingw-w64-x86_64-qt5 mingw-w64-x86_64-fftw mingw-w64-x86_64-libtiff"
  - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
  - cmd: C:\msys64\usr\bin\bash -e -l -c "cd /mrtrix3/ && ./travis.sh"

