#!/bin/bash
# Verify operation when per-streamline weights are provided as input;
#   this induces a different code branch where the initial fixel-fixel
#   connectivity values are floating-point rather than integer
# Ensure that output matches that generated by a prior software version
fixelconnectivity SIFT_phantom/fixels/ SIFT_phantom/tracks.tck tmp/ \
-count tmp-count.mif \
-extent tmp-extent.mif \
-tck_weights_in SIFT_phantom/weights.csv \
-force

testing_diff_image tmp/index.mif fixelconnectivity/weighted/index.mif
testing_diff_image tmp/fixels.mif fixelconnectivity/weighted/fixels.mif
testing_diff_image tmp/values.mif fixelconnectivity/weighted/values.mif
testing_diff_image tmp-count.mif fixelconnectivity/weighted_count.mif
testing_diff_image tmp-extent.mif fixelconnectivity/weighted_extent.mif
