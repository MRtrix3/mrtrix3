mkdir -p ../tmp/dwi2mask && mrconvert BIDS/sub-01/dwi/sub-01_dwi.nii.gz -fslgrad BIDS/sub-01/dwi/sub-01_dwi.bvec BIDS/sub-01/dwi/sub-01_dwi.bval tmp-sub-01_dwi.mif -force && dwi2mask 3dautomask tmp-sub-01_dwi.mif ../tmp/dwi2mask/3dautomask_default.mif
dwi2mask 3dautomask tmp-sub-01_dwi.mif ../tmp/dwi2mask/3dautomask_options.mif -clfrac 0.5 -nograd -peels 1 -nbhrs 17 -eclip -SI 130 -dilate 0 -erode 0 -NN1 -NN2 -NN3
dwi2mask ants tmp-sub-01_dwi.mif ../tmp/dwi2mask/ants_default.mif -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -force
dwi2mask ants tmp-sub-01_dwi.mif ../tmp/dwi2mask/ants_config.mif -config Dwi2maskTemplateImage dwi2mask/template_image.mif.gz -config Dwi2maskTemplateMask dwi2mask/template_mask.mif.gz -force
dwi2mask consensus tmp-sub-01_dwi.mif ../tmp/dwi2mask/consensus_output.mif -masks ../tmp/dwi2mask/consensus_masks.mif -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -force
dwi2mask fslbet tmp-sub-01_dwi.mif ../tmp/dwi2mask/fslbet_default.mif -force
dwi2mask fslbet tmp-sub-01_dwi.mif ../tmp/dwi2mask/fslbet_options.mif -bet_f 0.5 -bet_g 0.0 -bet_c 14 18 16 -bet_r 130.0 -force
dwi2mask fslbet tmp-sub-01_dwi.mif ../tmp/dwi2mask/fslbet_rescale.mif -rescale -force
dwi2mask hdbet tmp-sub-01_dwi.mif ../tmp/dwi2mask/hdbet.mif -force
dwi2mask legacy tmp-sub-01_dwi.mif ../tmp/dwi2mask/legacy.mif -force && testing_diff_image ../tmp/dwi2mask/legacy.mif dwi2mask/legacy.mif.gz
dwi2mask mean tmp-sub-01_dwi.mif ../tmp/dwi2mask/mean.mif -force && testing_diff_image ../tmp/dwi2mask/mean.mif dwi2mask/mean.mif.gz
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_antsfull_default.mif -software antsfull -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_antsquick_default.mif -software antsquick -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_antsfull_cmdline.mif -software antsfull -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -ants_options "--use-histogram-matching 1 --initial-moving-transform [template_image.nii,bzero.nii,1] --transform Rigid[0.1] --metric MI[template_image.nii,bzero.nii,1,32,Regular,0.25] --convergence 1000x500x250x100 --smoothing-sigmas 3x2x1x0 --shrink-factors 8x4x2x1" -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_antsfull_config.mif -software antsfull -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -config Dwi2maskTemplateAntsFullOptions "--use-histogram-matching 1 --initial-moving-transform [template_image.nii,bzero.nii,1] --transform Rigid[0.1] --metric MI[template_image.nii,bzero.nii,1,32,Regular,0.25] --convergence 1000x500x250x100 --smoothing-sigmas 3x2x1x0 --shrink-factors 8x4x2x1" -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_antsfull_file1.mif -software antsfull -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -ants_options dwi2mask/config_antsfull_1.txt -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_antsfull_file2.mif -software antsfull -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -ants_options dwi2mask/config_antsfull_2.txt -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_antsquick_cmdline.mif -software antsquick -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -ants_options "-t r" -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_antsquick_config.mif -software antsquick -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -config Dwi2maskTemplateANTsQuickOptions "-t r" -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_fsl_default.mif -software fsl -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_fsl_flirtcmdline.mif -software fsl -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -flirt_options "-cost normmi -dof 12" -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_fsl_flirtconfig.mif -software fsl -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -config Dwi2maskTemplateFSLFlirtOptions "-cost normmi -dof 12" -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_fsl_fnirtcmdline.mif -software fsl -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -fnirt_config dwi2mask/fnirt_config.cnf -force
dwi2mask template tmp-sub-01_dwi.mif ../tmp/dwi2mask/template_fsl_fnirtconfig.mif -software fsl -template dwi2mask/template_image.mif.gz dwi2mask/template_mask.mif.gz -config Dwi2maskTemplateFSLFnirtConfig $(pwd)/dwi2mask/fnirt_config.cnf -force
dwi2mask trace tmp-sub-01_dwi.mif ../tmp/dwi2mask/trace_default.mif -force && testing_diff_image ../tmp/dwi2mask/trace_default.mif dwi2mask/trace_default.mif.gz
dwi2mask trace tmp-sub-01_dwi.mif ../tmp/dwi2mask/trace_iterative.mif -iterative -force && testing_diff_image ../tmp/dwi2mask/trace_iterative.mif dwi2mask/trace_iterative.mif.gz

