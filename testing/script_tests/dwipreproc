mrconvert BIDS/sub-04/dwi/sub-04_dwi.nii.gz -fslgrad BIDS/sub-04/dwi/sub-04_dwi.bvec BIDS/sub-04/dwi/sub-04_dwi.bval tmp-sub-04_dwi.mif -export_grad_mrtrix tmp-sub-04_dwi.b -strides 0,0,0,1 && dwipreproc tmp-sub-04_dwi.mif tmp.mif -pe_dir ap -readout_time 0.1 -rpe_none -force && testing_diff_header tmp.mif dwipreproc/rpenone_default.mif.gz
dwipreproc BIDS/sub-04/dwi/sub-04_dwi.nii.gz -fslgrad BIDS/sub-04/dwi/sub-04_dwi.bvec BIDS/sub-04/dwi/sub-04_dwi.bval tmp.mif -export_grad_fsl tmp.bvec tmp.bval -pe_dir ap -readout_time 0.1 -rpe_none -force && testing_diff_header tmp.mif dwipreproc/rpenone_default.mif.gz && testing_diff_matrix tmp.bvec dwipreproc/rpenone_default.bvec -abs 1e-3 && testing_diff_matrix tmp.bval dwipreproc/rpenone_default.bval
dwipreproc BIDS/sub-04/dwi/sub-04_dwi.nii.gz -grad BIDS/sub-04/dwi/sub-04_dwi.b tmp.mif -export_grad_mrtrix tmp.b -pe_dir ap -readout_time 0.1 -rpe_none -force && testing_diff_header tmp.mif dwipreproc/rpenone_default.mif.gz && testing_diff_matrix tmp.b dwipreproc/rpenone_default.b -abs 1e-3
mrconvert BIDS/sub-04/fmap/sub-04_dir-1_epi.nii.gz -json_import BIDS/sub-04/fmap/sub-04_dir-1_epi.json tmp-sub-04_dir-1_epi.mif -force && mrconvert BIDS/sub-04/fmap/sub-04_dir-2_epi.nii.gz -json_import BIDS/sub-04/fmap/sub-04_dir-2_epi.json tmp-sub-04_dir-2_epi.mif -force && mrcat tmp-sub-04_dir-1_epi.mif tmp-sub-04_dir-2_epi.mif tmp-sub-04_dir-all_epi.mif -axis 3 -force && dwipreproc tmp-sub-04_dwi.mif tmp.mif -pe_dir ap -readout_time 0.1 -rpe_pair -se_epi tmp-sub-04_dir-all_epi.mif -force && testing_diff_header tmp.mif dwipreproc/rpepair_default.mif.gz
dwipreproc tmp-sub-04_dwi.mif tmp.mif -pe_dir ap -readout_time 0.1 -rpe_pair -se_epi tmp-sub-04_dir-all_epi.mif -align_seepi -force && testing_diff_image tmp.mif dwipreproc/rpepair_align.mif.gz -abs 1e-3
dwipreproc tmp-sub-04_dwi.mif tmp1.mif -pe_dir ap -readout_time 0.1 -rpe_pair -se_epi tmp-sub-04_dir-all_epi.mif -eddyqc_text tmp2/ -force
dwipreproc tmp-sub-04_dwi.mif tmp1.mif -pe_dir ap -readout_time 0.1 -rpe_pair -se_epi tmp-sub-04_dir-all_epi.mif -eddyqc_all tmp2/ -force
dwipreproc tmp-sub-04_dwi.mif tmp.mif -rpe_header -force && testing_diff_header tmp.mif dwipreproc/rpenone_default.mif
dwipreproc BIDS/sub-04/dwi/sub-04_dwi.nii.gz -fslgrad BIDS/sub-04/dwi/sub-04_dwi.bvec BIDS/sub-04/dwi/sub-04_dwi.bval -json_import BIDS/sub-04/dwi/sub-04_dwi.json tmp.mif -rpe_header -force && testing_diff_header tmp.mif dwipreproc/rpenone_default.mif
dwipreproc tmp-sub-04_dwi.mif tmp.mif -rpe_header -se_epi tmp-sub-04_dir-all_epi.mif -force && testing_diff_image tmp.mif dwipreproc/rpepair_default.mif
dwipreproc tmp-sub-04_dwi.mif tmp.mif -rpe_header -se_epi tmp-sub-04_dir-2_epi.mif -align_seepi -force && testing_diff_header tmp.mif dwipreproc/rpeheader_singlefmap.mif.gz
mrcat BIDS/sub-05/dwi/sub-05_acq-1_dwi.nii.gz BIDS/sub-05/dwi/sub-05_acq-2_dwi.nii.gz tmp-sub-05_dwi.nii -axis 3 -force && dwipreproc tmp-sub-05_dwi.nii -fslgrad BIDS/sub-05/dwi/sub-05_acq-1_dwi.bvec BIDS/sub-05/dwi/sub-05_acq-1_dwi.bval tmp.mif -pe_dir ap -readout_time 0.1 -rpe_all -force && testing_diff_header tmp.mif dwipreproc/rpeall.mif.gz
mrconvert BIDS/sub-05/dwi/sub-05_acq-1_dwi.nii.gz -fslgrad BIDS/sub-05/dwi/sub-05_acq-1_dwi.bvec BIDS/sub-05/dwi/sub-05_acq-1_dwi.bval -json_import BIDS/sub-05/dwi/sub-05_acq-1_dwi.json tmp-sub-05_acq-1_dwi.mif -force && mrconvert BIDS/sub-05/dwi/sub-05_acq-2_dwi.nii.gz -fslgrad BIDS/sub-05/dwi/sub-05_acq-2_dwi.bvec BIDS/sub-05/dwi/sub-05_acq-2_dwi.bval -json_import BIDS/sub-05/dwi/sub-05_acq-2_dwi.json tmp-sub-05_acq-2_dwi.mif -force && mrcat tmp-sub-05_acq-1_dwi.mif tmp-sub-05_acq-2_dwi.mif tmp-sub-05_acq-all_dwi.mif -axis 3 -force && dwipreproc tmp-sub-05_acq-all_dwi.mif tmp.mif -rpe_header -force && testing_diff_header tmp.mif dwipreproc/rpeall.mif.gz
mrconvert tmp-sub-04_dwi.mif tmp1.mif -coord 3 2:67,0,1 -force && dwipreproc tmp1.mif tmp2.mif -pe_dir ap -readout_time 0.1 -rpe_none -force && testing_diff_header tmp2.mif dwipreproc/permuted_volumes.mif.gz
mrconvert tmp-sub-04_dwi.mif tmp1.mif -coord 0 0:46 -coord 1 1:47 -force && dwipreproc tmp1.mif tmp2.mif -pe_dir ap -readout_time 0.1 -rpe_pair -se_epi tmp-sub-04_dir-all_epi.mif -force && testing_diff_header tmp2.mif dwipreproc/axis_padding.mif.gz
